# VPS deployment overrides - Use with NodePort/Ingress access
# Deploy: helm upgrade --install store-platform ./helm-charts/platform -f helm-charts/platform/values-vps.yaml
#
# IMPORTANT: Set ingress.additionalHosts to your VPS IP to fix 404 when accessing via http://<VPS_IP>:31107

postgresql:
  persistence:
    storageClass: "local-path"
    size: 20Gi

ingress:
  host: "platform.local.stores.dev"
  # Use allowIPAccess for raw IP access instead of additionalHosts
  additionalHosts: []
  # Allow raw IP access - fixes 404 when using http://<VPS_IP>:31107
  allowIPAccess: true
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"

api:
  replicas: 2
  serviceType: NodePort
  env:
    DEFAULT_DOMAIN_SUFFIX: ".51.20.42.151.nip.io"
    ALLOWED_ORIGINS: "http://localhost:3000,http://localhost:5173,http://localhost,http://127.0.0.1,http://51.20.42.151,http://51.20.42.151:30395,http://51.20.42.151:30232,http://51.20.42.151:30300"
    RATE_LIMIT_MAX_REQUESTS: "10000"

orchestrator:
  replicas: 1
  env:
    DEFAULT_DOMAIN_SUFFIX: ".51.20.42.151.nip.io"
    EXTERNAL_IP: "51.20.42.151"

dashboard:
  enabled: true
  replicas: 1
  serviceType: NodePort
  nodePort: 30300
  port: 80
  image:
    repository: node
    tag: "20-alpine"
    pullPolicy: IfNotPresent
  env:
    VITE_API_URL: "http://51.20.42.151:30395/api"
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
